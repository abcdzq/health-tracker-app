# 健康追蹤 App — 版本紀錄

## v2.1.0（2026-02-24）

### 變更
- **密碼改為可選**：首次使用不再強制設定密碼，改為歡迎畫面提供「設定密碼」和「跳過」兩個選項

### 新增功能
- 設定頁面可隨時**啟用或關閉密碼保護**
- 無密碼時顯示「啟用密碼保護」按鈕；有密碼時顯示「修改密碼」「立即鎖定」「關閉密碼保護」

### 修改檔案
- `js/auth.js` — 重構認證邏輯，新增 `skipSetup()`、`removePassword()`、`hasCompletedSetup()`
- `js/app.js` — 新增 `renderSecurityCard()`、`openSetPasswordModal()`、`confirmRemovePassword()`
- `index.html` — Lock Screen 加入「跳過」按鈕，安全設定卡片改為動態渲染
- `js/version.js` — 版本號更新為 2.1.0
- `sw.js` — 快取版本升級至 v6

---

## v2.0.0（2026-02-24）

### 新增功能
- **深色模式**：設定頁面切換深色/淺色主題，偏好自動儲存
- **水分追蹤**：今日頁面飲水卡片、環形進度圖、快速加水按鈕（+250/500/750ml）、撤銷功能
- **體重追蹤**：設定頁面記錄每日體重、顯示最新紀錄、統計頁面體重趨勢折線圖
- **統計報表頁面**：底部導覽新增「統計」分頁（本週/本月切換）
  - 摘要數據（運動天數、飲食記錄數、平均飲水量）
  - 運動達成率環形圖
  - 餐別分佈柱狀圖
  - 每日飲水量柱狀圖（含目標線）
  - 體重趨勢折線圖（含漸層填充）
- **飲食提醒**：設定早/午/晚餐提醒時間，使用 Notification API 推送通知
- **飲水目標設定**：可自訂每日飲水目標量（500～5000ml）
- **版本控制系統**：App 內可查看完整版本歷史紀錄

### 變更
- 底部導覽列從 3 個分頁改為 4 個（今日、歷史、統計、設定）
- 版本號從 v1.0 升級為 v2.0
- Service Worker 快取版本升級至 v4

### 新增檔案
- `js/charts.js` — Canvas 圖表繪製工具（環形圖、柱狀圖、折線圖）
- `js/version.js` — 版本歷史紀錄資料
- `CHANGELOG.md` — 版本控制文件

### 修改檔案
- `index.html` — 新增水分卡片、統計頁面、設定項目（深色模式、飲水目標、體重、提醒）
- `css/style.css` — 新增深色模式 CSS 變數、水分/體重/統計/提醒相關樣式
- `js/app.js` — 新增深色模式、水分、體重、統計、提醒、版本紀錄所有邏輯
- `js/storage.js` — 新增水分、體重、設定的儲存方法
- `js/utils.js` — 新增水分常數、日期範圍工具函式
- `sw.js` — 快取列表加入 `charts.js`、`version.js`，版本號更新

---

## v1.0.0（2026-02-24）

### 初始功能
- **飲食記錄**：新增/編輯/刪除飲食，支援早餐/午餐/晚餐/點心分類
- **食物照片**：拍照或從相簿選取，自動壓縮，全螢幕預覽
- **運動記錄**：記錄運動類型（跑步/走路/重訓等）、時長、備註
- **月曆歷史**：月曆視圖瀏覽，有記錄的日期標示圓點，日期詳情頁
- **密碼保護**：SHA-256 密碼加密、鎖定畫面、修改密碼
- **資料管理**：匯出/匯入 JSON（含照片）、清除全部資料
- **PWA 支援**：Service Worker 離線快取、Web App Manifest、可安裝

### 檔案結構
- `index.html` — 主頁面
- `css/style.css` — 全部樣式
- `js/app.js` — 主應用邏輯
- `js/auth.js` — 密碼驗證系統
- `js/storage.js` — localStorage 資料層
- `js/photodb.js` — IndexedDB 照片儲存
- `js/utils.js` — 工具函式與常數
- `sw.js` — Service Worker
- `manifest.json` — PWA Manifest
- `icons/icon-192.svg`、`icons/icon-512.svg` — App 圖示
